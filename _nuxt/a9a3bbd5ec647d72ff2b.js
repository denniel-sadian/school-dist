(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{201:function(e,t,r){var content=r(228);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(17).default)("a683b6d2",content,!0,{sourceMap:!1})},227:function(e,t,r){"use strict";var n=r(201);r.n(n).a},228:function(e,t,r){(t=r(16)(!1)).push([e.i,"header[data-v-10962133]{margin-top:53px;padding:64px 0}.w3-content[data-v-10962133]{max-width:500px;padding:16px 0}#profile-header[data-v-10962133]{display:flex;justify-content:center}#profile-info[data-v-10962133],#profile-photo[data-v-10962133]{display:flex}#profile-photo img[data-v-10962133]{max-width:200px;max-height:200px;min-width:200px;min-height:200px;border-radius:100%;-o-object-fit:cover;object-fit:cover;border:2px solid #9e9e9e}#profile-info[data-v-10962133]{padding:16px;justify-content:center;flex-direction:column}#profile-info h1[data-v-10962133]{font-weight:800}#profile-info h1[data-v-10962133],#profile-info p[data-v-10962133]{margin:0}.w3-button[data-v-10962133]{width:100%;border-radius:4px}.or[data-v-10962133]{margin:64px 0}@media (max-width:900px){#profile-header[data-v-10962133]{flex-direction:column;justify-content:center}#profile-photo img[data-v-10962133]{max-width:100px;max-height:100px;min-width:100px;min-height:100px}#profile-info[data-v-10962133],#profile-photo[data-v-10962133]{flex-direction:column;align-items:center;text-align:center}}",""]),e.exports=t},278:function(e,t,r){"use strict";r.r(t);r(10),r(18);var n=r(2),o={data:function(){return{username:this.$store.state.user.user.user.username,firstName:this.$store.state.user.user.user.first_name,lastName:this.$store.state.user.user.user.last_name,gender:this.$store.state.user.user.profile.gender,email:this.$store.state.user.user.user.email,idNumber:this.$store.state.user.user.profile.id_number,department:this.$store.state.user.user.profile.department,updated:!1,updating:!1,error:!1,file:"",updatingFile:!1,errorFile:!1,updatedPhoto:!1,password:"",password1:"",password2:"",updatingPassword:!1,errorPassword:!1,updatedPassword:!1}},computed:{user:function(){return this.$store.state.user.user.user},profile:function(){return this.$store.state.user.user.profile},photo:function(){return null!==this.profile.photo?"https://school.pythonanywhere.com/"+this.$store.state.user.user.profile.photo:"/anon_avatar.png"},departments:function(){return this.$store.state.information.departments}},methods:{handleFileUpload:function(){this.file=this.$refs.file.files[0]},updatePassword:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updatingPassword=!0,e.errorPassword=!1,r={password:e.password,password1:e.password1,password2:e.password2},t.next=5,e.$axios.put("accounts/change-password/",r).then((function(){e.errorPassword=!1,e.updatedPassword=!0,e.password="",e.password1="",e.password2="",setTimeout((function(){e.updatedPassword=!1}),1e4)})).catch((function(){e.errorPassword=!0,e.updatingPassword=!1,e.updatedPassword=!1,setTimeout((function(){e.errorPassword=!1}),1e4)})).finally((function(){return e.updatingPassword=!1}));case 5:case"end":return t.stop()}}),t)})))()},updatePhoto:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updatingFile=!0,e.errorFile=!1,e.updatedPhoto=!1,(r=new FormData).append("photo",e.file),e.$store.dispatch("user/toogleRefresh"),t.next=8,e.$store.dispatch("user/updatePhoto",r).then((function(){e.errorFile=!1,e.updatedPhoto=!0,setTimeout((function(){e.updatedPhoto=!1}),8e3)})).catch((function(){e.errorFile=!0,setTimeout((function(){e.errorFile=!1}),15e3)})).finally((function(){e.updatingFile=!1,e.$store.dispatch("user/toogleRefresh")}));case 8:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updating=!0,e.error=!1,r={username:e.username,first_name:e.firstName,last_name:e.lastName,gender:e.gender,email:e.email,id_number:e.idNumber,department:e.department},t.next=5,e.$store.dispatch("user/updateProfile",r).then((function(){e.updated=!0,e.error=!1})).catch((function(){e.error=!0,e.updated=!1,setTimeout((function(){e.error=!1}),1e4)})).finally((function(){return e.updating=!1}));case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("information/getDepartments");case 2:return t.next=4,e.$store.dispatch("user/getUser");case 4:case"end":return t.stop()}}),t)})))()}},d=(r(227),r(19)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("header",{staticClass:"w3-container"},[r("div",{attrs:{id:"profile-header"}},[r("div",{attrs:{id:"profile-photo"}},[r("img",{attrs:{src:e.photo,alt:"Avatar"}})]),e._v(" "),r("div",{attrs:{id:"profile-info"}},[r("h1",[e._v(e._s(e.user.first_name)+" "+e._s(e.user.last_name))]),e._v(" "),r("p",[r("strong",[e._v("@"+e._s(e.user.username))])]),e._v(" "),"admin"===e.profile.role?r("p",[e._v("\n          Your role is one of the admins of this system.\n        ")]):r("p",[e._v("Your role is a teacher.")])])])]),e._v(" "),r("article",{staticClass:"w3-container"},[r("div",{staticClass:"w3-content"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.update(t)}}},[r("div",{staticClass:"inpt"},[r("label",[e._v("Username:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",disabled:e.updating,required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("First Name:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],attrs:{type:"text",disabled:e.updating,required:""},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Last Name:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],attrs:{type:"text",disabled:e.updating,required:""},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Gender:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{disabled:e.updating,required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.gender=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"f"}},[e._v("Female")]),e._v(" "),r("option",{attrs:{value:"m"}},[e._v("Male")])])]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("ID Number:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.idNumber,expression:"idNumber"}],attrs:{type:"text",disabled:e.updating,required:""},domProps:{value:e.idNumber},on:{input:function(t){t.target.composing||(e.idNumber=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Email:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",disabled:e.updating,required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Department:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.department,expression:"department"}],attrs:{disabled:e.updating,required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.department=t.target.multiple?r:r[0]}}},e._l(e.departments,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.updated,expression:"updated"}],staticClass:"w3-small w3-text-green w3-center"},[e._v("\n          Your profile has been updated.\n        ")]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"w3-small w3-text-red w3-center"},[e._v("\n          There was something wrong. Perhaps you are trying to specify values\n          that were already taken by other users.\n        ")]),e._v(" "),r("button",{staticClass:"w3-button w3-green",attrs:{disabled:e.updating,type:"submit"}},[e.updating?r("span",[r("i",{staticClass:"fas fa-spinner w3-spin"}),e._v(" Updating...")]):r("span",[e._v("Update Profile")])])]),e._v(" "),e._m(0),e._v(" "),r("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.updatePhoto(t)}}},[r("div",{staticClass:"inpt"},[r("label",[e._v("Photo:")]),e._v(" "),r("input",{ref:"file",attrs:{type:"file",disabled:e.updatingFile,required:""},on:{change:e.handleFileUpload}})]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errorFile,expression:"errorFile"}],staticClass:"w3-small w3-text-red w3-center"},[e._v("\n          There was something wrong with the photo you were trying to upload.\n          Please choose a photo that has smaller size and filename, or you can\n          rename the filename of this photo.\n        ")]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.updatedPhoto,expression:"updatedPhoto"}],staticClass:"w3-small w3-text-green w3-center"},[e._v("\n          Your profile picture has been updated. It would take a few moments\n          to display your new photo depending on your connection.\n        ")]),e._v(" "),r("button",{staticClass:"w3-button w3-green",attrs:{disabled:e.updatingFile,type:"submit"}},[e.updatingFile?r("span",[r("i",{staticClass:"fas fa-spinner w3-spin"}),e._v(" Updating...")]):r("span",[e._v("Update Profile Picture")])])]),e._v(" "),e._m(1),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.updatePassword(t)}}},[r("div",{staticClass:"inpt"},[r("label",[e._v("Current Password:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",disabled:e.updatingPassword,required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("New Password:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],attrs:{type:"password",disabled:e.updatingPassword,required:""},domProps:{value:e.password1},on:{input:function(t){t.target.composing||(e.password1=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Confirm Password:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],attrs:{type:"password",disabled:e.updatingPassword,required:""},domProps:{value:e.password2},on:{input:function(t){t.target.composing||(e.password2=t.target.value)}}})]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errorPassword,expression:"errorPassword"}],staticClass:"w3-small w3-text-red w3-center"},[e._v("\n          Something was wrong. Perhaps, your current password was incorrect,\n          or your new password was not confirmed correctly.\n        ")]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.updatedPassword,expression:"updatedPassword"}],staticClass:"w3-small w3-text-green w3-center"},[e._v("\n          Your password has been updated.\n        ")]),e._v(" "),r("button",{staticClass:"w3-button w3-green",attrs:{disabled:e.updatingPassword,type:"submit"}},[e.updatingPassword?r("span",[r("i",{staticClass:"fas fa-spinner w3-spin"}),e._v(" Updating...")]):r("span",[e._v("Update Password")])])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"or"},[t("hr"),this._v(" "),t("span",[this._v("Or")]),this._v(" "),t("hr")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"or"},[t("hr"),this._v(" "),t("span",[this._v("Or")]),this._v(" "),t("hr")])}],!1,null,"10962133",null);t.default=component.exports}}]);