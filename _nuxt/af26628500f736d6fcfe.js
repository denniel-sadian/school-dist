(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{213:function(e,t,r){var content=r(254);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(17).default)("d3ccd00a",content,!0,{sourceMap:!1})},253:function(e,t,r){"use strict";var n=r(213);r.n(n).a},254:function(e,t,r){(t=r(16)(!1)).push([e.i,"header>div[data-v-f1e83e96]{overflow-y:auto}header[data-v-f1e83e96]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:16px}header>div[data-v-f1e83e96]{border:1.5px solid #9e9e9e;box-shadow:0 4px 10px 0 rgba(0,0,0,.2),0 4px 20px 0 rgba(0,0,0,.19);border-radius:4px;max-width:400px;width:100%;padding:16px}header h2[data-v-f1e83e96]{text-align:center;font-family:Nunito!important}.w3-button[data-v-f1e83e96]{width:100%;border-radius:4px}",""]),e.exports=t},277:function(e,t,r){"use strict";r.r(t);r(18);var n=r(2),o={middleware:"hasPermissionToRegister",layout:"full_height_body",data:function(){return{username:"",idNumber:"",email:"",password:"",password1:"",file:"",registering:!1,wrong:!1,disabled:!1}},computed:{creds:function(){return this.$store.state.registration.credentials},addressing:function(){return"f"===this.creds.gender?"miss":"mister"},fullname:function(){return"".concat(this.creds.first_name," ").concat(this.creds.last_name)},fromWho:function(){return"".concat(this.creds.from_who.first_name," ").concat(this.creds.from_who.last_name)}},methods:{handleFileUpload:function(){this.file=this.$refs.file.files[0]},register:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.username&&e.idNumber&&e.email&&e.password&&e.password1)){t.next=13;break}return e.registering=!0,e.disabled=!0,r=new FormData,""!==e.file&&r.append("photo",e.file),r.append("code",e.creds.code),r.append("username",e.username),r.append("id_number",e.idNumber),r.append("email",e.email),r.append("password",e.password),r.append("password1",e.password1),t.next=13,e.$axios.post("accounts/register/",r).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/login",{username:e.username,password:e.password}).then((function(){e.$router.push("/")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.wrong=!0,e.registering=!1,e.disabled=!1,setTimeout((function(){e.wrong=!1}),1e4)}));case 13:case"end":return t.stop()}}),t)})))()}}},d=(r(253),r(19)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("div",{staticClass:"w3-animate-zoom"},[r("h2",[e._v("Registration")]),e._v(" "),r("p",{staticClass:"w3-small w3-center"},[e._v("\n      Good day, "),r("b",[e._v(e._s(e.addressing)+" "+e._s(e.fullname))]),e._v("! You have been permitted by admin "+e._s(e.fromWho)+" to register\n      "+e._s("admin"===e.creds.role?"an admin's":"a teacher's")+" account on\n      the system.\n      "),r("span",{staticClass:"w3-opacity"},[e._v("Not you?\n        "),r("nuxt-link",{staticClass:"w3-text-blue",attrs:{to:"/registration/check-code"}},[e._v("Go back")]),e._v(".")],1)]),e._v(" "),r("hr"),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("div",{staticClass:"inpt"},[r("label",[e._v("Username:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",disabled:e.disabled},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("ID Number:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.idNumber,expression:"idNumber"}],attrs:{type:"text",disabled:e.disabled},domProps:{value:e.idNumber},on:{input:function(t){t.target.composing||(e.idNumber=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Email:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",disabled:e.disabled},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[e._m(0),e._v(" "),r("input",{ref:"file",attrs:{type:"file"},on:{change:e.handleFileUpload}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Password:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",disabled:e.disabled},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Password Again:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],attrs:{type:"password",disabled:e.disabled},domProps:{value:e.password1},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)},input:function(t){t.target.composing||(e.password1=t.target.value)}}})]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.wrong,expression:"wrong"}],staticClass:"w3-small w3-text-red w3-center"},[e._v("\n        There was something wrong. Perhaps, your username is already taken or\n        your passwords did not match.\n      ")]),e._v(" "),r("hr"),e._v(" "),r("button",{staticClass:"w3-button w3-light-green",attrs:{type:"submit",disabled:e.disabled}},[e.registering?r("span",[r("i",{staticClass:"fas fa-spinner w3-spin"}),e._v(" Registering...\n        ")]):r("span",[e._v("Register")])]),e._v(" "),e._m(1),e._v(" "),r("button",{staticClass:"w3-button w3-light-blue",attrs:{disabled:e.disabled},on:{click:function(t){return e.$router.push("/login")}}},[e._v("\n        Login\n      ")])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("label",[this._v("Photo: "),t("span",{staticClass:"w3-opacity"},[this._v("Optional")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"or"},[t("hr"),this._v(" "),t("span",[this._v("Or")]),this._v(" "),t("hr")])}],!1,null,"f1e83e96",null);t.default=component.exports}}]);