(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{211:function(e,t,r){var content=r(250);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(17).default)("317877bc",content,!0,{sourceMap:!1})},212:function(e,t,r){var content=r(252);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(17).default)("7316fd77",content,!0,{sourceMap:!1})},249:function(e,t,r){"use strict";var n=r(211);r.n(n).a},250:function(e,t,r){(t=r(16)(!1)).push([e.i,".cont[data-v-a351bc4a]{padding:16px;border:1px solid #000;border-radius:4px;margin:16px 0}h3[data-v-a351bc4a]{font-weight:800}.btn[data-v-a351bc4a]{display:flex;justify-content:flex-end}.btn button[data-v-a351bc4a]{width:34px;height:34px;display:flex;justify-content:center;align-items:center;border-radius:100%;margin-left:16px}.w3-button[data-v-a351bc4a]{width:100%;margin:3px 0}",""]),e.exports=t},251:function(e,t,r){"use strict";var n=r(212);r.n(n).a},252:function(e,t,r){(t=r(16)(!1)).push([e.i,"header[data-v-2f361f43]{margin-top:53px;padding:64px 0!important;text-align:center}header h1[data-v-2f361f43]{text-transform:capitalize}.w3-content[data-v-2f361f43]{max-width:600px}form[data-v-2f361f43]{padding:16px;border-radius:4px;border:1px solid #000}.w3-button[data-v-2f361f43]{width:100%}article[data-v-2f361f43]{margin:20px 0}",""]),e.exports=t},271:function(e,t,r){"use strict";r.r(t);r(10),r(18);var n=r(2),o={props:{perm:Object,deps:Array},data:function(){return{editing:!1,updating:!1,deleting:!1,error:!1,role:this.perm.role,fName:this.perm.first_name,lName:this.perm.last_name,gender:this.perm.gender,code:this.perm.code,dep:this.perm.department}},computed:{username:function(){return this.$store.state.user.user.user.username}},methods:{edit:function(){this.editing=!0,this.role=this.perm.role,this.fName=this.perm.first_name,this.lName=this.perm.last_name,this.gender=this.perm.gender,this.code=this.perm.code,this.dep=this.perm.department},deletePerm:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=!0,t.next=3,e.$store.dispatch("user/deletePerm",e.perm.id);case 3:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updating=!0,e.error=!1,r={id:e.perm.id,code:e.code,role:e.role,first_name:e.fName,last_name:e.lName,gender:e.gender,department:e.dep},t.next=5,e.$store.dispatch("user/putPerm",r).then((function(){e.editing=!1})).catch((function(){e.error=!0,setTimeout((function(){e.error=!1}),1e4)})).finally((function(){e.updating=!1}));case 5:case"end":return t.stop()}}),t)})))()}}},l=(r(249),r(19)),c={middleware:"isAdmin",components:{RegPerm:Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cont",class:{"w3-border-green":e.perm.used,"w3-hide":e.deleting}},[e.editing?r("form",{on:{submit:function(t){return t.preventDefault(),e.update(t)}}},[r("div",{staticClass:"inpt"},[r("label",[e._v("Role:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.role=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"admin"}},[e._v("As an Admin")]),e._v(" "),r("option",{attrs:{value:"teacher"}},[e._v("As a Teacher")])])]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("First Name:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.fName,expression:"fName"}],attrs:{type:"text",required:""},domProps:{value:e.fName},on:{input:function(t){t.target.composing||(e.fName=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Last Name:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.lName,expression:"lName"}],attrs:{type:"text",required:""},domProps:{value:e.lName},on:{input:function(t){t.target.composing||(e.lName=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Gender:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.gender=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"f"}},[e._v("Female")]),e._v(" "),r("option",{attrs:{value:"m"}},[e._v("Male")])])]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Code:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",required:""},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Department:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.dep,expression:"dep"}],attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.dep=t.target.multiple?r:r[0]}}},e._l(e.deps,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),e._v(" "),r("hr"),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"w3-small w3-text-red w3-center"},[e._v("\n      Please provide a unique code.\n    ")]),e._v(" "),r("button",{staticClass:"w3-button w3-light-green w3-round w3-small w3",attrs:{type:"submit",disabled:e.updating}},[e.updating?r("span",[r("i",{staticClass:"fas fa-spinner w3-spin"}),e._v(" Updating...")]):r("span",[e._v("Update Permission")])]),e._v(" "),r("button",{staticClass:"w3-pink w3-round w3-button w3-small",attrs:{disabled:e.updating},on:{click:function(t){e.editing=!1}}},[e._v("\n      Cancel\n    ")])]):r("div",{staticClass:"display"},[r("h3",{class:{"w3-text-green":e.perm.used}},[r("i",{staticClass:"fas fa-key"}),e._v(" "+e._s(e.perm.code)+"\n    ")]),e._v(" "),r("p",[e._v("\n      "+e._s(e.perm.url)+" This permission was given to\n      "),r("b",[e._v(e._s("m"===e.perm.gender?"Mister":"Miss")+" "+e._s(e.perm.first_name)+"\n        "+e._s(e.perm.last_name))]),e._v("\n      by "),e.perm.from_who.username===e.username?r("span",[e._v("you")]):r("span",[e._v("admin "+e._s(e.perm.from_who.first_name)+"\n        "+e._s(e.perm.from_who.last_name))]),e._v("\n      to create\n      "+e._s("admin"===e.perm.role?"an admin's":"a teacher's")+" account on\n      the system.\n      "),e.perm.used?r("span",{staticClass:"w3-text-green"},[e._v("This permission has been used already.")]):r("span",[e._v("This permission is not yet used.")])]),e._v(" "),r("p",{staticClass:"w3-small"},[e._v(e._s(new Date(e.perm.date).toDateString()))]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.perm.from_who.username===e.username,expression:"perm.from_who.username === username"}],staticClass:"btn"},[r("button",{directives:[{name:"show",rawName:"v-show",value:!e.perm.used,expression:"!perm.used"}],staticClass:"w3-button w3-round w3-small w3-border w3-border-black",on:{click:e.edit}},[r("i",{staticClass:"fas fa-pencil-alt"})]),e._v(" "),r("button",{staticClass:"w3-button w3-text-red w3-round w3-small w3-border w3-border-red",on:{click:e.deletePerm}},[r("i",{staticClass:"fas fa-trash-alt"})])])])])}),[],!1,null,"a351bc4a",null).exports},data:function(){return{got:0,creating:!1,error:!1,role:"",fName:"",lName:"",gender:"",code:"",dep:""}},computed:{permissions:function(){return this.$store.state.user.permissions},departments:function(){return this.$store.state.information.departments}},methods:{createPermission:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.creating=!0,e.error=!1,r={code:e.code,role:e.role,first_name:e.fName,last_name:e.lName,gender:e.gender,department:e.dep},t.next=5,e.$store.dispatch("user/postPerm",r).then((function(){e.code="",e.role="",e.fName="",e.lName="",e.gender="",e.dep=""})).catch((function(){e.error=!0,setTimeout((function(){e.error=!1}),1e4)})).finally((function(){e.creating=!1}));case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/getPerms").then((function(){return e.got++}));case 2:case"end":return t.stop()}}),t)})))()}},d=(r(251),Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),e.got<1?r("div",[e._m(1)]):r("div",[r("article",{staticClass:"w3-container"},[r("form",{staticClass:"w3-content",on:{submit:function(t){return t.preventDefault(),e.createPermission(t)}}},[e._m(2),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Role:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.role=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"admin"}},[e._v("As an Admin")]),e._v(" "),r("option",{attrs:{value:"teacher"}},[e._v("As a Teacher")])])]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("First Name:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.fName,expression:"fName"}],attrs:{type:"text",required:""},domProps:{value:e.fName},on:{input:function(t){t.target.composing||(e.fName=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Last Name:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.lName,expression:"lName"}],attrs:{type:"text",required:""},domProps:{value:e.lName},on:{input:function(t){t.target.composing||(e.lName=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Gender:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.gender=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"f"}},[e._v("Female")]),e._v(" "),r("option",{attrs:{value:"m"}},[e._v("Male")])])]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Code:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",required:""},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"inpt"},[r("label",[e._v("Department:")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.dep,expression:"dep"}],attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.dep=t.target.multiple?r:r[0]}}},e._l(e.departments,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),e._v(" "),r("hr"),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"w3-center w3-text-red w3-small"},[e._v("\n          Something was wrong. Perhaps, there is already a permission that\n          holds the code you gave. Please, provide a unique code.\n        ")]),e._v(" "),r("button",{staticClass:"w3-button w3-green w3-round",attrs:{type:"submit",disabled:e.creating}},[e.creating?r("span",[r("i",{staticClass:"fas fa-spinner w3-spin"}),e._v(" Creating...")]):r("span",[e._v("Create Permission")])])])]),e._v(" "),r("article",{staticClass:"w3-container"},[r("div",{staticClass:"w3-content"},[0===e.permissions.length?r("div",{staticClass:"w3-center"},[r("h4",[e._v("There is no permission yet.")])]):r("div",[r("h2",{staticClass:"w3-center"},[e._v("List of Permissions")]),e._v(" "),e._l(e.permissions,(function(t){return r("RegPerm",{key:t.id,attrs:{perm:t,deps:e.departments}})}))],2)])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("header",{staticClass:"w3-container"},[t("div",{staticClass:"w3-content w3-padding w3-center"},[t("h1",[this._v("Account Registration Permissions")]),this._v(" "),t("p",[this._v("\n        This page can only be accessed by the admins. Before anyone creates an\n        account, an admin must provide a permission first.\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"w3-large w3-text-green w3-center"},[t("i",{staticClass:"fas fa-spinner w3-spin"}),this._v(" Loading...\n    ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[t("i",{staticClass:"fas fa-plus-circle"}),this._v(" Create permisson")])}],!1,null,"2f361f43",null));t.default=d.exports}}]);